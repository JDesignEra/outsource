{{#extend 'stylesheets'}}
{{!-- <link rel="stylesheet" href="croppie.css" /> --}}
{{!-- <style>
    #page {
        background: #FFF;
        padding: 20px;
        margin: 20px;
    }

    #demo-basic {
        width: 200px;
        height: 300px;
    }
</style> --}}
{{/extend}}
<section class="edit-profile">
    <!-- Button trigger modal -->
    <form method="POST" class="row justify-content-around">
        <div class="col-12">
            <div class="card testimonial-card z-depth-2 pt-2 mb-2 jarallax view overlay">
                <img id="bannerePic" class="img-fluid jarallax-img lozad h-100"
                    onerror='this.src="/img/profile/banner.png"' src="/uploads/profile/{{user.id}}/banner.png" alt="">
                <div id="inputBorder" class="mask flex-center waves-effect waves-light rgba-black-strong">
                    <h3 class="text-white"> Change Banner</h3>
                </div>
                <input type="file" class="d-none" name="upload_banner" id="upload_banner">
                <input type="hidden" name="bannerString" id="bannerString">
            </div>
        </div>
        <div class="col-md-12 col-lg-6">
            <!-- Card -->
            <div class="card testimonial-card z-depth-2 pt-2 mb-5">
                <!-- Avatar -->
                <div class="avatar mx-auto white mt-4 view overlay">
                    <img onerror='this.src = "/img/profile/default.png"'
                        src="/uploads/profile/{{user.id}}/profilePic.png" id="profilePic" class="rounded-circle lozad"
                        alt="">
                    <div id="inputImg" class="mask flex-center waves-effect waves-light rgba-black-strong">

                        <small class="text-white">Change Image</small>
                        {{!-- <div class="file-upload-circle" data-autosubmit="false">
                            <input type="file" name="coverPicture" />

                        </div> --}}
                    </div>
                    <input type="file" class="d-none" name="upload_image" id="upload_image">
                    <input type="hidden" name="imgString" id="imgString">
                </div>
                <!-- Content -->
                <div class="card-body">
                    <!-- Name -->
                    <h3 class="card-title">{{user.username}}</h3>

                    <h5 class="card-title text-muted">
                        {{#if user.jobTitle}}
                        {{user.jobTitle}}
                        {{else}}
                        Service Provider
                        {{/if}}
                    </h5>


                    <div class="form-group row mx-auto">
                        <label for="website" class="text-left">Website</label>
                        <input type="text" class="form-control" name="website" id="website" aria-describedby="helpId"
                            placeholder="e.g. www.mywebsite.com" value="{{user.website}}">
                    </div>


                    <div class="form-group row mx-auto">
                        <label for="dob" class="text-left">Birthday</label>
                        {{#if user.dob}}
                        <input placeholder="Selected date" type="text" id="dob" name="dob"
                            class="form-control datepicker" value="{{formatDate user.dob 'DD/MM/YYYY'}}">
                        {{else}}
                        <input type="text" id="dob" name="dob"
                            class="form-control datepicker">
                        {{/if}}
                    </div>


                    <div class="form-group row mx-auto">
                        <label for="gender" class="text-left">Gender</label>
                        <select name="gender" id="gender" class="browser-default custom-select custom-select mb-3">
                            {{#if user.gender}}
                            <option value="{{user.gender}}" selected>{{user.gender}}</option>
                            <hr>
                            {{else}}
                            <option value="Not Set" selected>Not Set</option>}
                            {{/if}}
                            
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Others">Others</option>

                        </select>
                    </div>

                    <div class="form-group row mx-auto">
                        <label for="location" class="text-left">Country</label>
                        <select name="location" id="location" class="browser-default custom-select custom-select mb-3"
                            placeholder="Country">
                            {{#if user.location}}
                            <option value="{{user.location}}" selected>{{user.location}}</option>
                            {{/if}}
                            {{#each countryList}}
                            <option value="{{this.name}}">{{this.name}}</option>
                            {{/each}}
                        </select>
                    </div>

                    <div class="form-group row mx-auto">
                        <label for="occupation" class="text-left">Occupation</label>
                        <input type="text" class="form-control" name="occupation" id="occupation"
                            aria-describedby="helpId" placeholder="e.g. Illustrator" value="{{user.occupation}}">
                    </div>

                    <hr class="hr-primary">
                    <div class="mt-5 text-center py-4">
                        <h4 class="card-title">Delete Account</h4>
                        <a class="btn btn-danger col-5" data-toggle="modal" data-target="#confirm{{id}}"><i
                                class="fas fa-trash-alt fa-lg"></i>Delete Account</a>
                    </div>

                </div>
            </div>


        </div>
        <div class="col-md-12 col-lg-6">
            <div class="z-depth-2 card">
                <!-- Content -->
                <div class="card-body">
                    <!-- Name -->
                    <h4 class="card-title text-left">Bio</h4>
                    <div class="form-group">
                        <textarea class="form-control rounded-0" id="bio" name="bio" value=""
                            rows="10">{{user.bio}}</textarea>
                    </div>
                    <hr class="hr-primary">

                    <h4 class="card-title text-left">Skills</h4>
                    <div id="skillInputList" class="">

                        <div style="" id="skillInput1" class="form-group">
                            <input type="text" class="form-control" name="skill1" id="skill1"
                                placeholder="e.g. Illustrator" value="{{getItem skills 0}}">
                        </div>

                        <div style="" id="skillInput2" class="form-group">
                            <input type="text" class="form-control" name="skill2" id="skill2"
                                placeholder="e.g. Illustrator" value="{{getItem skills 1}}">
                        </div>

                        <div style="" id="skillInput3" class="form-group">
                            <input type="text" class="form-control" name="skill3" id="skill3"
                                placeholder="e.g. Illustrator" value="{{getItem skills 2}}">
                        </div>

                        <div style="" id="skillInput4" class="form-group">
                            <input type="text" class="form-control" name="skill4" id="skill4"
                                placeholder="e.g. Illustrator" value="{{getItem skills 3}}">
                        </div>

                        <div style="" id="skillInput5" class="form-group">
                            <input type="text" class="form-control" name="skill5" id="skill5"
                                placeholder="e.g. Illustrator" value="{{getItem skills 4}}">
                        </div>

                    </div>
                    <div class="mx-auto row justify-content-between">
                        <input type="button" value="Add Skill" class="btn btn-secondary" id="addButton">
                        <input type="button" value="Remove Skill" class="btn btn-secondary" id="removeButton">
                    </div>

                    <hr class="hr-primary">

                    <div class="mx-auto row justify-content-between">
                        <a href="/profile"><input type="button" value="Back" class="btn btn-secondary"></a>
                        <input type="submit" value="Update Changes" class="btn btn-secondary">
                    </div>
                </div>
            </div>
            {{#extend 'modals'}}
            <div class="modal fade" id="confirm{{id}}" tabindex="-1" role="dialog" aria-labelledby="label"
                aria-hidden="true">

                <!-- Change class .modal-sm to change the size of the modal -->
                <div class="modal-dialog modal-sm" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title w-100" id="label">Confirm Delete?</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="my-2 row justify-content-around mx-auto col-12">
                            <a type="button" class="btn btn-danger" href="./edit/{{user.id}}">
                                Yes
                            </a>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>

                        </div>
                    </div>
                </div>
            </div>
            {{/extend}}
        </div>

    </form>
    {{#extend 'modals'}}
    <div class="modal fade" id="confirm{{id}}" tabindex="-1" role="dialog" aria-labelledby="label" aria-hidden="true">

        <!-- Change class .modal-sm to change the size of the modal -->
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title w-100" id="label">Confirm Delete?</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="my-2 row justify-content-around mx-auto col-12">
                    <a type="button" class="btn btn-danger" href="./edit/{{user.id}}">
                        Yes
                    </a>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>

                </div>
            </div>
        </div>
    </div>
    {{/extend}}
    </div>

    </form>
</section>
{{#extend 'modals'}}


<!-- Profile Picture Modal -->
<div class="modal fade" id="uploadimageModal" tabindex="-1" role="dialog" aria-labelledby="uploadimageModal"
    aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Update Profile Picture</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-12">
                    <div id="img-demo">

                    </div>
                </div>
                {{!-- <div class="col-12">
                    
                </div> --}}
            </div>
            <div class="modal-footer">
                <button class="btn btn-success crop_image">Crop & Upload</button>
            </div>
        </div>
    </div>
</div>

<!-- Banner Picture Modal -->
<div class="modal fade" id="uploadBannerModal" tabindex="-1" role="dialog" aria-labelledby="uploadBannerModal"
    aria-hidden="true">


    <div class="modal-dialog-banner modal-dialog mx-auto">
        <div class="modal-content mt-5">
            <div class="modal-header">
                <h5 class="modal-title">Update Banner Picture</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-12">
                    <div id="banner">

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success crop_banner" data-dismiss="modal">Crop & Upload</button>
            </div>
        </div>
    </div>
</div>
{{/extend}}

{{#extend 'scripts'}}
<script src="/js/vendor/croppie.js" type="text/javascript"></script>
<script src="/js/editProfile.js"></script>
{{/extend}}