<section class="edit-profile">
    <form method="POST" class="row justify-content-around">
        <div class="col-6">

            <!-- Card -->
            <div class="testimonial-card z-depth-2 pt-2 mb-5">
                <!-- Avatar -->
                <div class="avatar mx-auto white mt-4">
                    <img src="https://picsum.photos/id/659/400/" class="rounded-circle lozad" alt="">
                </div>
                <!-- Content -->
                <div class="card-body">
                    <!-- Name -->
                    <h3 class="card-title">{{user.username}}</h3>

                    <h5 class="card-title text-muted">
                        {{#if user.jobTitle}}
                        {{user.jobTitle}}
                        {{else}}
                        Service Provider
                        {{/if}}
                    </h5>


                    <div class="form-group row mx-auto">
                        <label for="website" class="text-left">Website</label>
                        <input type="text" class="form-control" name="website" id="website" aria-describedby="helpId"
                            placeholder="e.g. www.mywebsite.com" value="{{user.website}}">
                    </div>


                    <div class="form-group row mx-auto">
                        <label for="dob" class="text-left">Birthday</label>
                        <input placeholder="Selected date" type="text" id="dob" name="dob"
                            class="form-control datepicker" value="{{formatDate user.dob 'DD/MM/YYYY'}}">
                    </div>


                    <div class="form-group row mx-auto">
                        <label for="gender" class="text-left">Gender</label>
                        <select name="gender" id="gender" class="browser-default custom-select custom-select mb-3">
                            <option value="{{user.gender}}" selected>{{user.gender}}</option>
                            <hr>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Others">Others</option>

                        </select>
                    </div>

                    <div class="form-group row mx-auto">
                        <label for="location" class="text-left">Country</label>
                        <select name="location" id="location" class="browser-default custom-select custom-select mb-3"
                            placeholder="Country">
                            <option value="{{user.location}}" selected>{{user.location}}</option>
                            {{#each countryList}}
                            <option value="{{this.name}}">{{this.name}}</option>
                            {{/each}}
                        </select>
                    </div>

                    <div class="form-group row mx-auto">
                        <label for="occupation" class="text-left">Occupation</label>
                        <input type="text" class="form-control" name="occupation" id="occupation"
                            aria-describedby="helpId" placeholder="e.g. Illustrator" value="{{user.occupation}}">
                    </div>

                    <hr class="hr-primary">


                </div>
            </div>


        </div>
        <div class="col-6">
                        <div class="z-depth-2">
                <!-- Content -->
                <div class="card-body">
                    <!-- Name -->
                    <h4 class="card-title text-left">Bio</h4>
                    <div class="form-group">
                        <textarea class="form-control rounded-0" id="bio" name="bio" value=""
                            rows="10">{{user.bio}}</textarea>
                    </div>
                    <hr class="hr-primary">

                    <h4 class="card-title text-left">Skills</h4>
                    <div id="skillInputList" class="">

                        <div style="" id="skillInput1" class="form-group">
                            <input type="text" class="form-control" name="skill1" id="skill1"
                                placeholder="e.g. Illustrator" value="{{getItem skills 0}}">
                        </div>

                        <div style="" id="skillInput2" class="form-group">
                            <input type="text" class="form-control" name="skill2" id="skill2"
                                placeholder="e.g. Illustrator" value="{{getItem skills 1}}">
                        </div>

                        <div style="" id="skillInput3" class="form-group">
                            <input type="text" class="form-control" name="skill3" id="skill3"
                                placeholder="e.g. Illustrator" value="{{getItem skills 2}}">
                        </div>

                        <div style="" id="skillInput4" class="form-group">
                            <input type="text" class="form-control" name="skill4" id="skill4"
                                placeholder="e.g. Illustrator" value="{{getItem skills 3}}">
                        </div>

                        <div style="" id="skillInput5" class="form-group">
                            <input type="text" class="form-control" name="skill5" id="skill5"
                                placeholder="e.g. Illustrator" value="{{getItem skills 4}}">
                        </div>

                    </div>
                    <div class="mx-auto row justify-content-between">
                        <input type="button" value="Add Button" class="btn btn-secondary" id="addButton">
                        <input type="button" value="Remove Button" class="btn btn-secondary" id="removeButton">
                    </div>

                    <hr class="hr-primary">

                    <div class="mx-auto row justify-content-between">
                        <a href="/profile"><input type="button" value="Back" class="btn btn-secondary"></a>
                        <input type="submit" value="Update Changes" class="btn btn-secondary">
                    </div>
                </div>
            </div>

            <div class="z-depth-2 mt-5 text-center py-4">
                <h4 class="card-title">Delete Account</h4>
                
                <a class="btn btn-danger col-5" data-toggle="modal"
                            data-target="#confirm{{id}}"><i class="fas fa-trash-alt fa-lg"></i>Delete Account</a>
            </div>
            <div class="z-depth-2 mt-5 text-center py-4">
                <h4 class="card-title">Change Password</h4>
                <a href="../auth/changePw"><input type="button" value="Change Password" class="btn btn-secondary"></a>
            </div>
                    {{#extend 'modals'}}
                    <div class="modal fade" id="confirm{{id}}" tabindex="-1" role="dialog" aria-labelledby="label"
                        aria-hidden="true">

                        <!-- Change class .modal-sm to change the size of the modal -->
                        <div class="modal-dialog modal-sm" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title w-100" id="label">Confirm Delete?</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="my-2 row justify-content-around mx-auto col-12">
                                    <a type="button" class="btn btn-danger" href="./edit/{{user.id}}">
                                        Yes
                                    </a>
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>

                                </div>
                            </div>
                        </div>
                    </div>
                    {{/extend}}
        </div>

    </form>


    {{#extend 'scripts'}}
    <script>
        counter = 0
        for (i = 1; i < 6; i++) {
            skillInput = document.getElementById("skill" + i)
            if (skillInput.value != "") {
                counter++
            }
        }

        for (j = 5; j > counter; j--) {
            emptyInput = document.getElementById("skillInput" + j).style.display = "none"
        }

        $("#addButton").click(function () {
            console.log("clicks")

            counter++;
            console.log(counter)

            document.getElementById("skillInput" + counter).style.display = "block"
            disableOrEnable()
        });

        $("#removeButton").click(function () {
            skillInput = document.getElementById("skill" + counter).value = ""
            document.getElementById("skillInput" + counter).style.display = "none"
            counter--;
            disableOrEnable()

        });

        function disableOrEnable() {
            if (counter == 1) {
                $('#removeButton').attr("disabled", true);
                return false
            }
            else {
                $('#removeButton').attr("disabled", false);

            }
            if (counter >= 5) {
                $('#addButton').attr("disabled", true);
                return false;
            }
            else {
                $('#addButton').attr("disabled", false);

            }
        }
    </script>
    {{/extend}}

</section>